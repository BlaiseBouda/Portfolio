import{o as c,c as d,n as $,_ as k,a as e,b as L,d as C,e as f,f as v,w as x,g as p,T as w,r as M,h as V,i as g,t as _,j as h,F as y,k as B,l as j,m as O,v as T,C as U}from"./index-c4a55288.js";const E={__name:"Loader",props:{class:{String,default:null}},setup(t){const s=t,a=()=>s.class?"loader "+s.class:"loader l-xl l-c";return(o,n)=>(c(),d("div",{class:$(a())},null,2))}},R={},S={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 320 512"},q=e("path",{d:"M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"},null,-1),N=[q];function H(t,s){return c(),d("svg",S,N)}const I=k(R,[["render",H]]);const A={key:0,class:"modal",role:"dialog"},D={__name:"Modal",props:{open:{type:Boolean,default:!1},closeable:{type:Boolean,default:!0},class:{type:String,default:"p-20 br-10px"}},emits:["close"],setup(t,{emit:s}){const a=t,o=l=>{l.key==="Escape"&&a.open&&n()};L(()=>document.addEventListener("keydown",o)),C(()=>{document.removeEventListener("keydown",o)});const n=l=>{a.closeable===!0&&s("close")};return(l,r)=>(c(),f(V,{to:"body"},[v(w,{name:"fade",appear:""},{default:x(()=>[a.open?(c(),d("div",{key:0,onClick:n,class:"fixed bg-modal"})):p("",!0)]),_:1}),v(w,{name:"pop",appear:""},{default:x(()=>[a.open?(c(),d("div",A,[e("div",{class:$(a.class)},[M(l.$slots,"default")],2)])):p("",!0)]),_:3})]))}},F={},P={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 512 512"},W=e("path",{d:"M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V274.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V416c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zM432 456c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"},null,-1),G=[W];function X(t,s){return c(),d("svg",P,G)}const J=k(F,[["render",X]]);const K={class:"detail"},Q=e("b",{class:"c-p"},"Initial Image",-1),Y={key:0},Z={class:"pb-10"},ee=["src"],te=e("b",{style:{color:"#34c436"}},"New Image",-1),se={key:0},ae={key:1},ne={class:"pb-10"},le=["src"],oe=["href"],ie=e("span",null,"Télecharger",-1),ce={__name:"OpenImage",props:{image:{type:Object,required:!1},open:{type:Boolean,default:!1}},setup(t){const s=g(null),a=l=>{s.value={w:l.target.naturalWidth,h:l.target.naturalHeight}},o=g(null),n=(l,r=2)=>{const i=Math.floor(Math.log(l)/Math.log(1024));return(l/Math.pow(1024,i)).toFixed(r).toString()+[" o"," ko"," Mo"][i]};return(l,r)=>(c(),f(D,{open:t.open},{default:x(()=>[e("div",null,[e("button",{onClick:r[0]||(r[0]=i=>l.$emit("close")),class:"close r-10 center"},[v(I)]),e("div",K,[e("div",null,[e("div",null,[Q,s.value?(c(),d("div",Y,[e("div",null,"Largeur: "+_(s.value.w)+" px ",1),e("div",null,"Hauteur: "+_(s.value.h)+" px ",1)])):p("",!0),e("div",Z,"Taile: "+_(n(t.image.initial.size)),1)]),e("img",{src:t.image.initial.url,onLoad:a},null,40,ee)]),e("div",null,[e("div",null,[te,o.value?(c(),d("div",se,"Largeur: "+_(o.value.naturalWidth)+" px ",1)):p("",!0),o.value?(c(),d("div",ae,"Hauteur: "+_(o.value.naturalHeight)+" px ",1)):p("",!0),e("div",ne,"Taile: "+_(n(t.image.final.size)),1)]),e("img",{ref_key:"final",ref:o,src:t.image.final.url,alt:""},null,8,le),e("div",null,[e("a",{class:"btn c-g-10 btn-primary",href:t.image.final.url,download:""},[v(J),h(),ie],8,oe)])])])])]),_:1},8,["open"]))}},re={class:"fw-600 pt-10"},ue={class:"fileImgxPrev br-5px g-5 p-10"},de={style:{position:"relative"}},me=["src","onClick"],_e=["onClick"],pe={__name:"PrevImgx",props:{images:{type:Object,required:!0},loading:{type:Boolean,required:!1}},emits:["delete:images"],setup(t,{emit:s}){const a=t,o=i=>{delete a.images[i],s("delete:images",i)},n=g(!1),l=g({}),r=async i=>{l.value=await i,n.value=!0};return(i,u)=>(c(),d(y,null,[e("div",re,_(Object.keys(t.images).length)+" Image"+_(Object.keys(t.images).length>1?"s":""),1),e("div",ue,[(c(!0),d(y,null,B(t.images,(m,b)=>(c(),d("div",de,[e("img",{src:m.final.url,onClick:z=>r(m)},null,8,me),e("button",{onClick:j(z=>o(b),["prevent"]),class:"close r-5 center"},[v(I)],8,_e)]))),256)),t.loading?(c(),f(E,{key:0})):p("",!0)]),n.value?(c(),f(ce,{key:0,onClose:u[0]||(u[0]=m=>n.value=!n.value),open:n.value,image:l.value},null,8,["open","image"])):p("",!0)],64))}},ge=t=>{const s=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]),a=t.split(",")[0].split(":")[1].split(";")[0],o=s.length,n=new Uint8Array(o);for(let l=0;l<o;l+=1)n[l]=s.charCodeAt(l);return new Blob([n],{type:a})},ve=async({file:t,maxSize:s})=>{const a=new FileReader,o=new Image,n=document.createElement("canvas"),l=r=>{let{width:i,height:u}=o;if(i>u?i>s&&(u*=s/i,i=s):u>s&&(i*=s/u,u=s),n.width=i,n.height=u,n.getContext("2d").drawImage(o,0,0,i,u),["image/png","image/jpg","image/jpeg"].includes(r)){const b=n.toDataURL(r);return ge(b)}return new Error("Image Invalide")};return await new Promise((r,i)=>{if(!t.type.match(/image.*/)){i(new Error("Not an image"));return}a.onload=u=>{o.onload=()=>r(l(t.type)),o.src=u.target.result},a.readAsDataURL(t)})},fe=["disabled"],he={__name:"Upload",props:{maxSize:{type:Number,required:!0},disabled:{type:Boolean,default:!1}},emits:["images:update"],setup(t,{emit:s}){const a=t,o=g({}),n=g(!1);function l(r){Array.from(r.target.files).map(async u=>{try{n.value=!0;const m=await ve({file:u,maxSize:a.maxSize});o.value[u.name]={initial:{size:u.size,url:URL.createObjectURL(u)},final:{size:m.size,url:URL.createObjectURL(m)}},n.value=!1}catch(m){console.log(m)}})}return(r,i)=>(c(),d(y,null,[e("input",{type:"file",accept:"image/png, image/jpeg",class:"form-file",multiple:"",onChange:l,disabled:t.disabled},null,40,fe),n.value||Object.keys(o.value).length>0?(c(),f(pe,{key:0,loading:n.value,images:o.value},null,8,["loading","images"])):p("",!0)],64))}},ye=["value"],be={__name:"TextInput",props:{modelValue:{type:Number,required:!0}},emits:["update:modelValue"],setup(t,{expose:s}){const a=g(null);return L(()=>{a.value.hasAttribute("autofocus")&&a.value.focus()}),s({focus:()=>a.value.focus()}),(o,n)=>(c(),d("input",{class:"form-control",value:t.modelValue,onInput:n[0]||(n[0]=l=>o.$emit("update:modelValue",l.target.value)),ref_key:"input",ref:a},null,40,ye))}},xe={__name:"InputError",props:{message:{type:String}},setup(t){return(s,a)=>O((c(),d("small",{class:"pt-5 invalid"},_(t.message),513)),[[T,t.message]])}};const $e={class:"c-xl p-20 place-center"},we=e("h1",{class:"c-p t-c"}," ResizeImages",-1),ke=e("p",null,[h(" Une solution qui vous permet de redimensionner les images et les affichées coté client avant l'upload. Le redimensionnement se fait de maniere automatique suivant la "),e("b",null,"taille max"),h(" afin de conserver le ratio de l'image. "),e("div",null,[e("b",{class:"c-p"},"USAGE:"),h(" Chosisez un taille max (20 - 2000), ensuite selectionnez les images, enfin cliquez sur l'image pour l'aperçu.")])],-1),Le=e("div",{class:"title pt-10"},"Personalisation",-1),Ie={class:"flex pt-30 c-g-10"},ze=e("label",{for:"heigth"},"Taille max",-1),Ce={method:"get"},Me={class:"pt-10"},Ve=e("h3",null,[e("label",null,"Choisir un ou des image(s)")],-1),je={__name:"ResizeImages",setup(t){const s=g(270),a=g(null),o=()=>{if(s.value<20){a.value="La taille est top petite";return}if(s.value>2e3){a.value="La taille est trop grande";return}a.value=null};return(n,l)=>(c(),d(y,null,[e("div",$e,[e("div",null,[we,ke,Le,e("div",Ie,[e("div",null,[ze,v(be,{id:"max",type:"number",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=r=>s.value=r),modelModifiers:{number:!0},class:$(a.value?"is-invalid":""),onInput:o},null,8,["modelValue","class"]),a.value?(c(),f(xe,{key:0,message:a.value},null,8,["message"])):p("",!0)])]),e("form",Ce,[e("div",Me,[Ve,v(he,{maxSize:s.value,disabled:!!a.value},null,8,["maxSize","disabled"])])])])]),v(U)],64))}};export{je as default};
